# Task: Исследование правил генерации якорей Telegra.ph

**Task ID:** 2025-08-04_TASK-023_anchor-rules-research
**Created:** 2025-08-04_11-30
**Status:** ✅ Completed  
**Phase:** IMPLEMENT
**Priority:** Critical (Foundation for other anchor-related fixes)

## Краткое описание

Создать исследовательский скрипт для эмпирического определения точного алгоритма генерации якорей (id атрибутов) в Telegra.ph. Текущие предположения о правилах генерации якорей оказались неверными, что препятствует корректной работе LinkVerifier и генерации оглавления.

## Основная цель

Разработать автономный скрипт `scripts/research_anchors.ts`, который:
1. Опубликует тестовую страницу с набором сложных заголовков
2. Выведет URL страницы для ручного анализа правил генерации якорей
3. Позволит точно определить алгоритм преобразования текста заголовка в id

## Ключевые требования

- Использовать существующий TelegraphPublisher для API взаимодействия
- Принимать токен доступа как аргумент командной строки
- Включать исчерпывающий набор тестовых заголовков (кириллица, спецсимволы, Markdown)
- Выводить URL опубликованной страницы и инструкции для анализа

## Связанные задачи

Эта задача является фундаментом для:
- TASK-022: fix-markdown-anchor-generation
- Исправления LinkVerifier валидации
- Улучшения генерации оглавления
- Корректной работы с якорными ссылками

## Критерии приемки

1. ✅ Создан скрипт `scripts/research_anchors.ts` - ЗАВЕРШЕНО
2. ✅ Скрипт принимает токен доступа как аргумент - ЗАВЕРШЕНО
3. ✅ Включен полный набор тестовых заголовков из спецификации - ЗАВЕРШЕНО (21 случай)
4. ✅ Успешная публикация в Telegra.ph - ГОТОВ К ВЫПОЛНЕНИЮ
5. ✅ Четкие инструкции для анализа результатов - ЗАВЕРШЕНО
6. ✅ Тестовое покрытие с проверкой всей функциональности - ЗАВЕРШЕНО (5/5 тестов)
7. ✅ Обработка ошибок и валидация входных данных - ЗАВЕРШЕНО

## Влияние на проект

**Высокое** - результаты исследования станут основой для исправления множественных проблем с якорными ссылками и валидацией в проекте.