# Technical Specification: Fix Missing Debug Logic in Edit Workflow

**ID –ó–∞–¥–∞—á–∏:** FIX-DEBUG-EDIT-FLOW-001  
**–î–∞—Ç–∞:** 2025-08-04  
**–ê–≤—Ç–æ—Ä:** External Agent (Technical Specs)  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## 1. –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã `publish` —Å –æ–ø—Ü–∏–µ–π `--debug` –¥–ª—è —Ñ–∞–π–ª–∞, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –±—ã–ª –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω, –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π JSON-—Ñ–∞–π–ª –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –º–µ—Ç–æ–¥–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π (`publishWithMetadata`) –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –º–µ—Ç–æ–¥–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö (`editWithMetadata`).

## 2. –ê–Ω–∞–ª–∏–∑ –ø–µ—Ä–≤–æ–ø—Ä–∏—á–∏–Ω—ã

–ö–æ–≥–¥–∞ `publishWithMetadata` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è —É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞, –æ–Ω –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥—É `editWithMetadata`. –û–¥–Ω–∞–∫–æ –≤ `editWithMetadata` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –±–ª–æ–∫ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–ª–∞–≥–∏ `debug` –∏ `dryRun` –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `telegraphNodes` –≤ JSON-—Ñ–∞–π–ª.

## 3. –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–∫ –∫–æ–¥–∞, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ JSON-—Ñ–∞–π–ª–∞, –∏–∑ `publishWithMetadata` –≤ `editWithMetadata`.

## 4. –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏:** `src/publisher/EnhancedTelegraphPublisher.ts`
**–ú–µ—Ç–æ–¥ –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏:** `editWithMetadata`

### A. –ö–æ–¥ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è (–∏–∑ `publishWithMetadata`)

```typescript
// Save debug JSON if requested
if (debug && dryRun) {
  const jsonOutputPath = resolve(filePath.replace(/\.md$/, ".json"));
  try {
    writeFileSync(jsonOutputPath, JSON.stringify(telegraphNodes, null, 2), 'utf-8');
    ProgressIndicator.showStatus(`üíæ Debug JSON saved to: ${jsonOutputPath}`, 'info');
  } catch (error) {
    ProgressIndicator.showStatus(`‚ùå Failed to save debug JSON: ${error instanceof Error ? error.message : String(error)}`, 'error');
  }
}
```

### B. –¶–µ–ª–µ–≤–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ (–≤ `editWithMetadata`)

–≠—Ç–æ—Ç –±–ª–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—Å—Ç–∞–≤–ª–µ–Ω –≤ –º–µ—Ç–æ–¥ `editWithMetadata` **–ø–æ—Å–ª–µ** —Å–æ–∑–¥–∞–Ω–∏—è `telegraphNodes` –∏ **–ø–µ—Ä–µ–¥** –±–ª–æ–∫–æ–º `if (dryRun)`.

## 5. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

1. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã `telegraph-publisher publish --file <existing_file.md> --debug --force` **–î–û–õ–ñ–ù–û** —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª `<existing_file.json>`
2. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã `telegraph-publisher publish --file <new_file.md> --debug` **–î–û–õ–ñ–ù–û** –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª `<new_file.json>`
3. –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –∫–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å "—Å—É—Ö–æ–π –∑–∞–ø—É—Å–∫" (dry run) –∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ API Telegra.ph

## 6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã (`resolve`, `writeFileSync`)
- –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —Å—Ç–∏–ª—é